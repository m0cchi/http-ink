#+title: http-ink
is HTTP-Server

#+begin_src cl
#!/bin/sh
#|-*- mode:lisp -*-|#
#|
exec ros -Q -- $0 "$@"
|#
(ql:quickload '(:toy-gun :http-ink) :silent t)

(http-ink:defroute
 (:get "/path" () (http-ink.response-util:respond-with-html http-ink::env "response body")))

(defun main (&rest argv)
  (declare (ignorable argv))
  (let* ((server (toy-gun:make-server :port 38080 :address "0.0.0.0")))
    (setq toy-gun:*cartridge* #'http-ink:ink)
    (toy-gun:start server)
    (toy-gun:dispose server)))
#+begin_end
